{# Copyright (C) 2006-2014 Edgewall Software

This software is licensed as described in the file COPYING, which
you should have received as part of this distribution. The terms
are also available at http://trac.edgewall.com/license.html.

This software consists of voluntary contributions made by many
individuals. For the exact contribution history, see the revision
history and logs, available at http://trac.edgewall.org/.
#}

# extends 'jlayout.html'

<!DOCTYPE html>
<html>
  <head>
    <title>
      # block title
      ${title} ${ super() }
      # endblock title
    </title>

    # block head

    ${ super() }

    #   if show_args_form:
    <script type="text/javascript">
      jQuery(document).ready(function($) {
      $("fieldset legend").enableFolding(false);
      });
    </script>
    #   endif

    # endblock head
  </head>

  <body>
    # block content
    <div id="content" class="report">
      <h1>${title}
        # if numrows:
        <span class="numrows">(${ngettext('%(num)s match', '%(num)s matches',
          numrows)})</span>
        # endif
      </h1>

      <form method="get" action="">
        <div id="prefs">
          <div>
            <label>
              ${_("Max items per page")}
              <input type="text" name="max" size="10" value="${max}" />
            </label>
            # if show_args_form:
            <fieldset id="reportfilters">
              <legend class="foldable">${_("Arguments")}</legend>
              <table summary="${_("Report arguments")}">
                <tbody>
                  <tr style="height: 1px"><td colspan="2"></td></tr>
                </tbody>
                # if name != 'USER':
                #   for (name, value) in sorted(args.items()):
                <tbody>
                  <tr>
                    <th scope="row"><label>${name}</label></th>
                    <td class="filter">
                      <input type="text" size="42"${
                           {'name': name, 'value': value}|htmlattr}/>
                    </td>
                  </tr>
                </tbody>
                #   endfor
                # endif
              </table>
            </fieldset>
            # endif
          </div>
          <div class="buttons">
            <input type="submit" value="${_("Update")}" />
          </div>
        </div>
      </form>

      # if description:
      <div id="description">
        ${wiki_to_html(context, description)}
      </div>
      # endif

      <div class="buttons">
        # if 'REPORT_MODIFY' in perm(report.resource):
        <form action="" method="get">
          <div>
            <input type="hidden" name="action" value="edit" />
            <input type="submit" value="${_("Edit report")}" ${accesskey("e")}/>
          </div>
        </form>
        # endif
        # if 'REPORT_CREATE' in perm(report.resource):
        <form action="" method="get">
          <div>
            <input type="hidden" name="action" value="copy" />
            <input type="submit" value="${_("Copy report")}" />
          </div>
        </form>
        # endif
        # if 'REPORT_DELETE' in perm(report.resource):
        <form action="" method="get">
          <div>
            <input type="hidden" name="action" value="delete" />
            <input type="submit" value="${_("Delete report")}" />
          </div>
        </form>
        # endif
      </div>

      # if paginator.has_more_pages:
      <h2 class="report-result">
        ${_("Results")}
        <span class="numresults">(${paginator.displayed_items()})</span>
      </h2>
      # endif

      # include 'jpage_index.html'
      # include 'jreport_table.html'
      # include 'jpage_index.html'

      <div id="help">
        # trans href = href.wiki('TracReports')
        <strong>Note:</strong> See <a href="${href}">TracReports</a> for help
        on using and creating reports.
        # endtrans
      </div>
    </div>
    ${ super() }
    # endblock content
  </body>
</html>
